<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggnetwork: Network geometries for ggplot2 • ggnetwork</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ggnetwork: Network geometries for ggplot2">
<meta property="og:description" content="ggnetwork">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggnetwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggnetwork.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/briatte/ggnetwork/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggnetwork_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ggnetwork: Network geometries for ggplot2</h1>
                        <h4 class="author">François Briatte</h4>
            
            <h4 class="date">2021-07-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/briatte/ggnetwork/blob/master/vignettes/ggnetwork.Rmd"><code>vignettes/ggnetwork.Rmd</code></a></small>
      <div class="hidden name"><code>ggnetwork.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>The <a href="https://github.com/briatte/ggnetwork"><code>ggnetwork</code></a> package provides a way to build network plots with <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>.</p>
</blockquote>
<p>Install the stable version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggnetwork"</span><span class="op">)</span></code></pre></div>
<p>Or use <code>remotes</code> to install the latest version of the package <a href="https://github.com/briatte/ggnetwork">from GitHub</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"briatte/ggnetwork"</span><span class="op">)</span></code></pre></div>
<p>The package is meant to be used with <code>ggplot2</code> version 2.0.0 or above, so make sure that you update your version of <code>ggplot2</code> from CRAN before using <code>ggnetwork</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></code></pre></div>
<p><code>ggnetwork</code> further requires the <code>network</code> and <code>sna</code> packages for network manipulation, and will also install the <a href="https://github.com/slowkow/ggrepel"><code>ggrepel</code></a> package for repulsive label drawing.</p>
<p>The <code>ggnetwork</code> package is very much related to the development of <a href="https://github.com/sctyner/geomnet"><code>geom_net</code></a> by <a href="https://github.com/sctyner">Samantha C. Tyner</a> and <a href="https://github.com/heike">Heike Hoffmann</a>. It also shares some similarity to the <a href="https://github.com/briatte/ggnet"><code>ggnet</code> and <code>ggnet2</code> functions</a>, which are part of the <a href="https://github.com/ggobi/ggally"><code>GGally</code></a> package by Barret Schloerke and others. Each of these projects are extensions to Hadley Wickham’s implementation of Leland Wilkinson’s “grammar of graphics” in <a href="https://ggplot2.tidyverse.org/">ggplot2</a>.</p>
<div id="minimal-example" class="section level2">
<h2 class="hasAnchor">
<a href="#minimal-example" class="anchor"></a>Minimal example</h2>
<p>Let’s define a small random graph to illustrate each component of <code>ggnetwork</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://statnet.org/">network</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://statnet.org">sna</a></span><span class="op">)</span>
<span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/network/man/network.html">network</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sna/man/rgraph.html">rgraph</a></span><span class="op">(</span><span class="fl">10</span>, tprob <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>Let’s now add categorical and continuous attributes for both edges and vertices. We’ll start with nodes, adding a categorical vertex attribute called <code>"family"</code>, which is set to either <code>"a"</code>, <code>"b"</code> or <code>"c"</code>, and a continuous vertex attribute called <code>"importance"</code>, which is set to either 1, 2 or 3.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">%v%</span> <span class="st">"family"</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">n</span> <span class="op">%v%</span> <span class="st">"importance"</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We now add a categorical edge attribute called <code>"type"</code>, which is set to either <code>"x"</code>, <code>"y"</code> or <code>"z"</code>, and a continuous vertex attribute called <code>"day"</code>, which is set to either 1, 2 or 3.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/network/man/network.edgecount.html">network.edgecount</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/network/man/attribute.methods.html">set.edge.attribute</a></span><span class="op">(</span><span class="va">n</span>, <span class="st">"type"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">24</span><span class="op">:</span><span class="fl">26</span><span class="op">]</span>, <span class="va">e</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/network/man/attribute.methods.html">set.edge.attribute</a></span><span class="op">(</span><span class="va">n</span>, <span class="st">"day"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="va">e</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Last, note that <code>ggnetwork</code> contains a “blank” plot theme that will avoid plotting axes on the sides of the network. We will use that theme in most of the plots:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">theme_blank</span></code></pre></div>
<pre><code>## function (base_size = 12, base_family = "", ...) 
## {
##     ggplot2::theme_bw(base_size = base_size, base_family = base_family) + 
##         ggplot2::theme(axis.text = ggplot2::element_blank(), 
##             axis.ticks = ggplot2::element_blank(), axis.title = ggplot2::element_blank(), 
##             legend.key = ggplot2::element_blank(), panel.background = ggplot2::element_rect(fill = "white", 
##                 colour = NA), panel.border = ggplot2::element_blank(), 
##             panel.grid = ggplot2::element_blank(), ...)
## }
## &lt;bytecode: 0x7fb5a34aee90&gt;
## &lt;environment: namespace:ggnetwork&gt;</code></pre>
</div>
<div id="main-building-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#main-building-blocks" class="anchor"></a>Main building blocks</h2>
<div id="ggnetwork" class="section level3">
<h3 class="hasAnchor">
<a href="#ggnetwork" class="anchor"></a><code>ggnetwork</code>
</h3>
<p>The <code>ggnetwork</code> package is organised around a ‘workhorse’ function of the same name, which will ‘flatten’ the network object to a data frame that contains the edge list of the network, along with the edge attributes and the vertex attributes of the sender nodes.</p>
<p>The network object referred to above might be an object of class <code>network</code>, or any data structure that can be coerced to it, such as an edge list, an adjacency matrix or an incidence matrix. If the <code>intergraph</code> package is installed, then objects of class <code>igraph</code> can also be used with the <code>ggnetwork</code> package.</p>
<p>The data frame returned by <code>ggnetwork</code> also contains the coordinates needed for node placement as columns <code>"x"</code>, <code>"y"</code>, <code>"xend"</code> and <code>"yend"</code>, which as a consequence are “reserved” names in the context of <code>ggnetwork</code>. If these names show up in the edge or the vertex attributes, the function will simply fail to work.</p>
<p>The default node placement algorithm used by <code>ggnetwork</code> to produce these coordinates is the Fruchterman-Reingold force-directed layout algorithm. All of the <a href="https://www.rdocumentation.org/packages/sna/versions/2.5/topics/gplot.layout">placement algorithms implemented in the <code>sna</code> package</a> are available through <code>ggnetwork</code>, which also accepts additional layout parameters:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">n</span>, layout <span class="op">=</span> <span class="st">"fruchtermanreingold"</span>, cell.jitter <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span>
<span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">n</span>, layout <span class="op">=</span> <span class="st">"target"</span>, niter <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></code></pre></div>
<p>The <code>layout</code> argument will also accept user-submitted coordinates as a two-column matrix with as many rows as the number of nodes in the network.</p>
<p>The top of the data frame produced by <code>ggnetwork</code> contains self-loops to force every node to be included in the plot. This explains why the rows shown below have the same values in <code>"x"</code> and <code>"xend"</code> (and in <code>"y"</code> and <code>"yend"</code>), and only missing values in the columns corresponding to the edge attributes:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##            x         y family importance vertex.names       xend      yend day
## 1 0.00000000 0.5707838      b          3            9 0.58455732 0.6877668   1
## 2 0.00000000 0.5707838      b          3            9 0.37409950 0.4782654   3
## 3 0.00000000 0.5707838      b          3            9 0.01512992 0.2619399   3
## 4 0.01512992 0.2619399      c          1            3 0.37409950 0.4782654   1
## 5 0.20175894 0.0000000      a          2            6 0.01512992 0.2619399   1
## 6 0.29251648 0.7219903      b          3           10 0.37409950 0.4782654   3
##   type
## 1    y
## 2    y
## 3    z
## 4    z
## 5    z
## 6    x</code></pre>
<p>The next rows of the data frame contain the actual edges:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##             x         y family importance vertex.names      xend      yend day
## 51  0.1914155 0.3680394      c          1            5 0.1914155 0.3680394  NA
## 61  1.0000000 0.1249449      a          2            6 1.0000000 0.1249449  NA
## 71  0.5608290 0.3399057      a          2            7 0.5608290 0.3399057  NA
## 81  0.2403864 0.0000000      c          1            8 0.2403864 0.0000000  NA
## 9   0.8766397 0.8778292      b          3            9 0.8766397 0.8778292  NA
## 101 0.1413222 0.6424354      b          3           10 0.1413222 0.6424354  NA
##     type
## 51  &lt;NA&gt;
## 61  &lt;NA&gt;
## 71  &lt;NA&gt;
## 81  &lt;NA&gt;
## 9   &lt;NA&gt;
## 101 &lt;NA&gt;</code></pre>
<p>The data frame returned by <code>ggnetwork</code> has (<em>N</em> + <em>E</em>) rows, where <em>N</em> is the number of nodes of the network, and <em>E</em> its number of edges. This data format is very likely to include duplicate information about the nodes, which is unavoidable.</p>
<p>Note that <code>ggnetwork</code> does not include any safety mechanism against duplicate column names. As a consequence, if there is both a vertex attribute called <code>"na"</code> and an edge attribute called <code>"na"</code>, as in the example above, then the vertex attribute will be renamed <code>"na.x"</code> and the edge attribute will be renamed <code>"na.y"</code>.</p>
</div>
<div id="fortify-network-and-fortify-igraph" class="section level3">
<h3 class="hasAnchor">
<a href="#fortify-network-and-fortify-igraph" class="anchor"></a><code>fortify.network</code> and <code>fortify.igraph</code>
</h3>
<p>The ‘flattening’ process described above is implemented by <code>ggnetwork</code> as <code>fortify</code> methods that are recognised by <code>ggplot2</code>. As a result, <code>ggplot2</code> will understand the following syntax as long as <code>n</code> is an object of class <code>network</code> or of class <code>igraph</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></code></pre></div>
<p>However, if the object <code>n</code> is a matrix or an edge list to be coerced to a network object, you are required to use the <code>ggnetwork</code> function to pass the object to <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="geom_edges" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_edges" class="anchor"></a><code>geom_edges</code>
</h3>
<p>Let’s now draw the network edges using <code>geom_edges</code>, which is just a lightly hacked version of <code>geom_segment</code>. In the example below, we map the <code>type</code> edge attribute to the linetype of the network edges:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>The other aesthetics that we mapped are the basic coordinates of the network plot. These might also be set as part of the call to <code>geom_segment</code>, but setting them at the root of the plot avoids having to repeat them in additional geoms.</p>
<p>Note that <code>geom_edges</code> can also produce curved edges by setting its <code>curvature</code> argument to any value above <code>0</code> (the default):</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey50"</span>, curvature <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div id="geom_nodes" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_nodes" class="anchor"></a><code>geom_nodes</code>
</h3>
<p>Let’s now draw the nodes using <code>geom_nodes</code>, which is just a lightly hacked version of <code>geom_point</code>. In the example below, we map the <code>family</code> vertex attribute to the color of the nodes, and make the size of these nodes proportional to the <code>importance</code> vertx attribute:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">family</span>, size <span class="op">=</span> <span class="va">importance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>Because <code>ggplot2</code> follows Wilkinson’s grammar of graphics, it accepts only one color scale. In the example above, that scale is mapped to a vertex attribute, but it could have also been mapped to an edge attribute. Mapping a color to <em>both</em> a vertex attribute and an edge attribute will create a single color scale that incorrectly merges both attributes into one:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">family</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This is a limitation of <code>ggnetwork</code> that would require violating some fundamental aspects of the grammar of graphics to be circumvented.</p>
</div>
</div>
<div id="more-building-blocks" class="section level2">
<h2 class="hasAnchor">
<a href="#more-building-blocks" class="anchor"></a>More building blocks</h2>
<div id="geom_nodetext" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_nodetext" class="anchor"></a><code>geom_nodetext</code>
</h3>
<p>Let’s now add node labels. These are simply plotted over the nodes by the <code>nodetext</code> geom, which works exactly like <code>geom_text</code>. In the example below, we map the <code>vertex.names</code> attribute (which contains numbers 1 to 10) to uppercase letters:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext.html">geom_nodetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">family</span>, label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span><span class="op">)</span>,
                fontface <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
</div>
<div id="geom_nodelabel" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_nodelabel" class="anchor"></a><code>geom_nodelabel</code>
</h3>
<p>If you prefer to use the <code>geom_label</code> geom recently introduced in <code>ggplot2</code>, <code>ggnetwork</code> also supports these through the <code>nodelabel</code> geom:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext.html">geom_nodelabel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">family</span>, label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span><span class="op">)</span>,
                 fontface <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div id="geom_nodetext_repel-and-geom_nodelabel_repel" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_nodetext_repel-and-geom_nodelabel_repel" class="anchor"></a><code>geom_nodetext_repel</code> and <code>geom_nodelabel_repel</code>
</h3>
<p><code>ggnetwork</code> supports the repulsive label functions introduced by the <code>ggrepel</code> package, which allows to label nodes with non-overlapping annotations. Simply add <code>_repel</code> to either <code>geom_nodetext</code> or <code>geom_nodelabel</code> to use that functionality:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext_repel.html">geom_nodelabel_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">family</span>, label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span><span class="op">)</span>,
                       fontface <span class="op">=</span> <span class="st">"bold"</span>, box.padding <span class="op">=</span> <span class="fu"><a href="../reference/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
<div id="geom_edgetext-and-geom_edgelabel" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_edgetext-and-geom_edgelabel" class="anchor"></a><code>geom_edgetext</code> and <code>geom_edgelabel</code>
</h3>
<p>Let’s now add edge labels. These are plotted at mid-distance of the nodes that the edges connect by the <code>edgetext</code> geom, which works exactly like <code>geom_label</code>, except that its default arguments do not draw a border around the labels. Here’s an example where we map the <code>day</code> edge attribute to edge labels:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey75"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gold"</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext.html">geom_nodetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edgetext.html">geom_edgetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">day</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"grey25"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey25"</span><span class="op">)</span>,
        panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>The <code>edgelabel</code> geom is just an alias of the <code>edgetext</code> geom. Note that these geoms are unlikely to produce adequate results if the edges produced by <code>geom_edges</code> are curved.</p>
</div>
<div id="geom_edgetext_repel-and-geom_edgelabel_repel" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_edgetext_repel-and-geom_edgelabel_repel" class="anchor"></a><code>geom_edgetext_repel</code> and <code>geom_edgelabel_repel</code>
</h3>
<p>As you would do with nodes, simply add <code>_repel</code> to either <code>geom_edgetext</code> or <code>geom_edgelabel</code> to draw repulsive edge labels:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey75"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gold"</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext.html">geom_nodetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edgetext_repel.html">geom_edgetext_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">day</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"grey25"</span>,
                      box.padding <span class="op">=</span> <span class="fu"><a href="../reference/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
        panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey25"</span><span class="op">)</span>,
        panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
</div>
</div>
<div id="more-plotting-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#more-plotting-parameters" class="anchor"></a>More plotting parameters</h2>
<p>This section presents some rather experimental features of <code>ggnetwork</code>.</p>
<div id="edge-arrows" class="section level3">
<h3 class="hasAnchor">
<a href="#edge-arrows" class="anchor"></a>Edge arrows</h3>
<p><code>ggnetwork</code> uses code by <a href="https://github.com/heike">Heike Hoffmann</a> to better show arrows in directed graphs. To illustrate this, we will need a directed graph example, so let’s use the first of the seven <code>emon</code> networks bundled in the <code>network</code> package:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">emon</span><span class="op">)</span>
<span class="va">emon</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>##  Network attributes:
##   vertices = 14 
##   directed = TRUE 
##   hyper = FALSE 
##   loops = FALSE 
##   multiple = FALSE 
##   total edges= 83 
##     missing edges= 0 
##     non-missing edges= 83 
## 
##  Vertex attribute names: 
##     Command.Rank.Score Decision.Rank.Score Formalization Location Paid.Staff Sponsorship vertex.names Volunteer.Staff 
## 
##  Edge attribute names: 
##     Frequency</code></pre>
<p>If this network is passed to <code>ggnetwork</code> without any further plotting parameter, the result will feature “shortened” edges that do not reach their receiver nodes:</p>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
<p>This is because directed networks are expected to be plotted with edge arrows indicating the directedness of each edge. Adding edge arrows with <code>geom_edges</code> works through the same call to the <code>arrow</code> function that is supported by <code>geom_segment</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">emon</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="../reference/unit.html">unit</a></span><span class="op">(</span><span class="fl">6</span>, <span class="st">"pt"</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"closed"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"tomato"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
<p>The slightly shortened edges avoid overplotting the edge arrows and the nodes. The amount of “edge shortening” can be set through the <code>arrow.gap</code> parameter of <code>ggnetwork</code>, which defaults to <code>0</code> when the network is undirected and <code>0.025</code> when it is. This parameter might need adjustment depending on the size of the nodes, and it will probably not manage to avoid any overplotting when the size of the nodes is not constant.</p>
</div>
<div id="edge-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#edge-weights" class="anchor"></a>Edge weights</h3>
<p><code>ggnetwork</code> can use an edge attribute as edge weights when computing the network layout. The name of that edge attribute should be passed to the <code>weights</code> argument for that to happen, as in this example, which will produce different layouts than if <code>weights</code> had been left set to <code>NULL</code> (the default):</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">emon</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, weights <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span></code></pre></div>
<p>The Kamada-Kawai is one example of a network layout that supports edge weights. The user should refer to the documentation of each network layout to understand which of these can make use of edge weights.</p>
<p>If <code>ggnetwork</code> finds duplicated edges in a network, it will return a warning, as these edges should probably have been converted to single weighted edges for adequate plotting.</p>
</div>
<div id="node-faceting" class="section level3">
<h3 class="hasAnchor">
<a href="#node-faceting" class="anchor"></a>Node faceting</h3>
<p>In order for <code>ggnetwork</code> to operate correctly with faceted plots, the <code>by</code> argument, which is <code>NULL</code> by default, can be set to the name of an edge attribute. The result will be a longer data frame that can be plotted with either <code>facet_wrap</code> or <code>facet_grid</code>, as in the example below, where the faceting variable, the <code>Frequency</code> edge attribute, has to be specified twice (once to <code>ggnetwork</code>, once to <code>facet_wrap</code>):</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/ggnetwork.html">ggnetwork</a></span><span class="op">(</span><span class="va">emon</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, arrow.gap <span class="op">=</span> <span class="fl">0.04</span>, by <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="../reference/unit.html">unit</a></span><span class="op">(</span><span class="fl">6</span>, <span class="st">"pt"</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"closed"</span><span class="op">)</span>,
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Sponsorship</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">Sponsorship</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">Frequency</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_facet.html">theme_facet</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-27-1.png" width="700"></p>
<p>The <code>by</code> argument is basically an attempt to bring minimal support for temporal networks in <code>ggnetwork</code>. It will systematically show all nodes in all plot facets, using the same coordinates in every facet. For more advanced plots of dynamic networks, the user should turn to the <a href="https://cran.r-project.org/package=ndtv"><code>ndtv</code></a> and <a href="https://cran.r-project.org/package=tsna"><code>tsna</code></a> packages.</p>
<p>The example above also shows how to use a vertex attribute as part of the aesthetics of the edges. Given how <code>ggnetwork</code> operates, these vertex attributes will always be those of the sender node.</p>
<p>Last, the example also shows that <code>ggnetwork</code> comes with a theme called <code>theme_facet</code>. This theme is a variation of the previously mentioned <code>theme_blank</code> that preserves its facet boxes:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">theme_facet</span></code></pre></div>
<pre><code>## function (base_size = 12, base_family = "", ...) 
## {
##     theme_blank(base_size = base_size, base_family = base_family) + 
##         ggplot2::theme(panel.border = ggplot2::element_rect(fill = NA, 
##             color = "grey50"), ...)
## }
## &lt;bytecode: 0x7fb5a06007c8&gt;
## &lt;environment: namespace:ggnetwork&gt;</code></pre>
</div>
</div>
<div id="additional-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-methods" class="anchor"></a>Additional methods</h2>
<p>Since <code>ggnetwork</code> works entirely through <code>ggplot2</code>, all <code>ggplot2</code> methods apply:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, color <span class="op">=</span> <span class="va">family</span>, size <span class="op">=</span> <span class="fl">1.5</span> <span class="op">*</span> <span class="va">importance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext.html">geom_nodetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span> <span class="va">vertex.names</span> <span class="op">]</span>, size <span class="op">=</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">importance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edgetext.html">geom_edgetext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">day</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"grey25"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_area</a></span><span class="op">(</span><span class="st">"importance"</span>, breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, max_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
<p>Similarly, it is possible to use any of the geometries more than once per plot:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey50"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, color <span class="op">=</span> <span class="va">family</span>, size <span class="op">=</span> <span class="fl">5.5</span> <span class="op">*</span> <span class="va">importance</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, color <span class="op">=</span> <span class="va">family</span>, size <span class="op">=</span> <span class="fl">1.5</span> <span class="op">*</span> <span class="va">importance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: `guides(&lt;scale&gt; = FALSE)` is deprecated. Please use `guides(&lt;scale&gt; =
## "none")` instead.</code></pre>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
<p>Last, all geoms provided by <code>ggnetwork</code> can be subsetted through the <code>data</code> argument, just as any <code>ggplot2</code> geom, and as in the example below, which draws only a subset of all node labels:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, xend <span class="op">=</span> <span class="va">xend</span>, yend <span class="op">=</span> <span class="va">yend</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_edges.html">geom_edges</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey50"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodes.html">geom_nodes</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, color <span class="op">=</span> <span class="va">family</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_nodetext_repel.html">geom_nodelabel_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">vertex.names</span><span class="op">)</span>,
                       box.padding <span class="op">=</span> <span class="fu"><a href="../reference/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"lines"</span><span class="op">)</span>,
                       data <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> <span class="va">x</span><span class="op">[</span> <span class="va">x</span><span class="op">$</span><span class="va">family</span> <span class="op">==</span> <span class="st">"a"</span>, <span class="op">]</span><span class="op">}</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_blank.html">theme_blank</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="ggnetwork_files/figure-html/unnamed-chunk-31-1.png" width="700"></p>
<hr>
<p>Last printed on Jul 6, 2021, using ggnetwork version 0.5.10.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://f.briatte.org/">François Briatte</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
